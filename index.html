<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Treinamento de Estagiários – Panobianco Vila Império</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #ffffff;
    margin: 0;
}
.container {
    max-width: 900px;
    margin: auto;
    padding: 30px;
    text-align: center;
}
h1 { font-size: 26px; margin-bottom: 5px; }
h2 { font-size: 18px; color: #555; margin-top: 0; }
.question {
    text-align: left;
    margin-top: 25px;
}
button {
    margin-top: 25px;
    padding: 12px 22px;
    font-size: 16px;
    cursor: pointer;
}
.hidden {
    display: none;
}
input {
    padding: 8px;
    width: 70%;
}
</style>
</head>

<body>

<div class="container">

<img src="logo-panobianco.png" alt="Panobianco" style="max-width:180px; margin-bottom:20px;">

<h1>Treinamento de Estagiários – Panobianco Vila Império</h1>
<h2>Avaliação Mensal de Musculação</h2>

<!-- BLOQUEIO -->
<div id="bloqueio" class="hidden">
    <p><strong>Avaliação ainda não liberada.</strong></p>
</div>

<!-- INÍCIO -->
<div id="inicio" class="hidden">
    <p>Digite seu nome completo:</p>
    <input type="text" id="nome">
    <br>
    <button onclick="iniciar()">Iniciar Avaliação</button>
</div>

<!-- QUIZ -->
<form id="quiz" class="hidden"></form>

<!-- RESULTADO -->
<div id="resultado" class="hidden"></div>

</div>

<script>
// ===== CONFIGURAÇÕES =====
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbywhvfOs_USjKqhRF7_GuBrrJdebJW29vvESZvoWu173w5zgk30KsPiDT6APfpTiVw1Vg/exec";
const UNIDADE = "Panobianco Vila Império";

// LIBERADO PARA TESTE (depois volte para 2026-01-01)
const inicioTreinamento = new Date("2024-01-01");
const hoje = new Date();

// ===== PERGUNTAS (EXEMPLO JANEIRO) =====
const perguntasPorMes = {
0: [
{q:"Qual músculo é o principal responsável pela extensão do joelho?",a:["Bíceps femoral","Glúteo máximo","Quadríceps","Panturrilha"],c:2},
{q:"Antes do supino, qual ajuste é essencial?",a:["Carga","Altura do banco","Velocidade","Descanso"],c:1},
{q:"Erro comum no agachamento:",a:["Olhar à frente","Joelhos para dentro","Core ativo","Pés alinhados"],c:1},
{q:"Dor lombar no leg press geralmente indica:",a:["Boa execução","Má posição do quadril","Carga leve","Descanso curto"],c:1}
]
};

// ===== CONTROLE DE DATA =====
if (hoje >= inicioTreinamento) {
    document.getElementById("inicio").classList.remove("hidden");
} else {
    document.getElementById("bloqueio").classList.remove("hidden");
}

let perguntasAtuais = [];

// ===== INICIAR =====
function iniciar() {
    const nome = document.getElementById("nome").value.trim();
    if (!nome) {
        alert("Digite seu nome.");
        return;
    }

    const mes = hoje.getMonth();
    perguntasAtuais = perguntasPorMes[mes];

    document.getElementById("inicio").classList.add("hidden");
    gerarQuiz();
}

// ===== GERAR QUIZ =====
function gerarQuiz() {
    const form = document.getElementById("quiz");
    form.innerHTML = "";

    perguntasAtuais.forEach((p,i)=>{
        const div = document.createElement("div");
        div.className = "question";
        div.innerHTML = `<p><strong>${i+1}. ${p.q}</strong></p>`;
        p.a.forEach((alt,j)=>{
            div.innerHTML += `
              <label>
                <input type="radio" name="q${i}" value="${j}">
                ${alt}
              </label><br>`;
        });
        form.appendChild(div);
    });

    form.innerHTML += `<button type="button" onclick="finalizar()">Finalizar Avaliação</button>`;
    form.classList.remove("hidden");
}

// ===== FINALIZAR =====
function finalizar() {
    let acertos = 0;
    perguntasAtuais.forEach((p,i)=>{
        const r = document.querySelector(`input[name="q${i}"]:checked`);
        if (r && parseInt(r.value) === p.c) acertos++;
    });

    const nota = ((acertos / perguntasAtuais.length) * 10).toFixed(1);
    const nome = document.getElementById("nome").value.trim();
    const mesAno = (hoje.getMonth()+1).toString().padStart(2,"0") + "/" + hoje.getFullYear();

    fetch(WEB_APP_URL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            nome: nome,
            unidade: UNIDADE,
            mesAno: mesAno,
            nota: nota
        })
    });

    document.getElementById("quiz").classList.add("hidden");
    document.getElementById("resultado").innerHTML =
      `<h2>Nota final: ${nota}</h2><p>Resultado registrado com sucesso.</p>`;
    document.getElementById("resultado").classList.remove("hidden");
}
</script>

</body>
</html>
